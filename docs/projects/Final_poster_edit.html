<!DOCTYPE html>
<!--
    Basically Basic Jekyll Theme 1.4.4
    Copyright 2017-2018 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/jekyll-theme-basically-basic/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
    
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Visualizing Lansing Traffic Stop Data | Brandon McIntyre</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Visualizing Lansing Traffic Stop Data" />
<meta name="author" content="Brandon McIntyre" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="&lt;p style=&quot;text-align: right;&quot;&gt; Brandon McIntyre &lt;/p&gt; &lt;p style=&quot;text-align: right;&quot;&gt; Analysis of Lansing Traffic Stops CMSE 402 SS20 &lt;/p&gt;" />
<meta property="og:description" content="&lt;p style=&quot;text-align: right;&quot;&gt; Brandon McIntyre &lt;/p&gt; &lt;p style=&quot;text-align: right;&quot;&gt; Analysis of Lansing Traffic Stops CMSE 402 SS20 &lt;/p&gt;" />
<link rel="canonical" href="https://mcint170.github.io//projects/Final_poster_edit" />
<meta property="og:url" content="https://mcint170.github.io//projects/Final_poster_edit" />
<meta property="og:site_name" content="Brandon McIntyre" />
<meta property="og:image" content="https://mcint170.github.io//assets/images/chocolate-chip-cookies-lg.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-10T14:51:34-05:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://mcint170.github.io//projects/Final_poster_edit"},"@type":"BlogPosting","image":{"thumbnail":"/assets/images/chocolate-chip-cookies-400x200.jpg","caption":"Photo from [Pexels](https://www.pexels.com)","url":"https://mcint170.github.io//assets/images/chocolate-chip-cookies-lg.jpg","@type":"imageObject"},"url":"https://mcint170.github.io//projects/Final_poster_edit","author":{"@type":"Person","name":"Brandon McIntyre"},"headline":"Visualizing Lansing Traffic Stop Data","dateModified":"2021-03-10T14:51:34-05:00","datePublished":"2021-03-10T14:51:34-05:00","description":"&lt;p style=&quot;text-align: right;&quot;&gt; Brandon McIntyre &lt;/p&gt; &lt;p style=&quot;text-align: right;&quot;&gt; Analysis of Lansing Traffic Stops CMSE 402 SS20 &lt;/p&gt;","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/stylesheets/main.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:400,400i,600,600i">
  

  
    
    <link rel="alternate" type="application/atom+xml" title="Brandon McIntyre" href="/feed.xml">
  
</head>


  <body class="layout--post visualizing-lansing-traffic-stop-data">

    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>


    <div class="sidebar-toggle-wrapper">
      

      <button class="toggle navicon-button larr" type="button">
        <span class="toggle-inner">
          <span class="sidebar-toggle-label visually-hidden">Menu</span>
          <span class="navicon"></span>
        </span>
      </button>
    </div>

    <div id="sidebar" class="sidebar">
      <div class="inner">
        <nav id="primary-nav" class="site-nav" itemscope itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation">
  <ul id="menu-main-navigation" class="menu">
    <!-- Home link -->
    <li class="menu-item">
      <a href="/" itemprop="url">
        <span itemprop="name">Home</span>
      </a>
    </li>

    <!-- site.pages links -->
    
    

    
      
      
        <li class="menu-item">
          <a href="/about.html" itemprop="url">
            <span itemprop="name">About Me</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/projects/" itemprop="url">
            <span itemprop="name">Projects</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/resume.html" itemprop="url">
            <span itemprop="name">Resume</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/posts/" itemprop="url">
            <span itemprop="name">Post Archive</span>
          </a>
        </li>
      
    
  </ul>
</nav>

        <ul class="contact-list">
  
    <li>
      <a href="mailto:mcint170@msu.edu">
        <span class="icon icon--email"><svg xmlns="http://www.w3.org/2000/svg" viewBox="313.1 3.7 16 16"><path d="M318.5 8.9c0-.2.2-.4.4-.4h4.5c.2 0 .4.2.4.4s-.2.4-.4.4h-4.5c-.3 0-.4-.2-.4-.4zm.4 2.1h4.5c.2 0 .4-.2.4-.4s-.2-.4-.4-.4h-4.5c-.2 0-.4.2-.4.4s.1.4.4.4zm3.5 1.2c0-.2-.2-.4-.4-.4h-3.1c-.2 0-.4.2-.4.4s.2.4.4.4h3.1c.2.1.4-.1.4-.4zm-1.5-8.4l-1.7 1.4c-.2.1-.2.4 0 .6s.4.2.6 0l1.4-1.2 1.4 1.2c.2.1.4.1.6 0s.1-.4 0-.6l-1.7-1.4c-.3-.1-.5-.1-.6 0zm7.8 6.2c.1.1.1.2.1.3v7.9c0 .8-.7 1.5-1.5 1.5h-12.5c-.8 0-1.5-.7-1.5-1.5v-7.9c0-.1.1-.2.1-.3l1.6-1.3c.2-.1.4-.1.6 0s.1.4 0 .6l-1.2 1 1.8 1.3v-4c0-.6.5-1.1 1.1-1.1h7.5c.6 0 1.1.5 1.1 1.1v4l1.8-1.3-1.2-1c-.2-.1-.2-.4 0-.6s.4-.2.6 0l1.6 1.3zm-11.6 2.2l4 2.8 4-2.8V7.6c0-.1-.1-.2-.2-.2h-7.5c-.1 0-.2.1-.2.2v4.6zm10.9-1l-4.7 3.4 3.4 2.6c.2.1.2.4.1.6-.1.2-.4.2-.6.1l-3.6-2.8-1.2.8c-.1.1-.3.1-.5 0l-1.2-.8-3.6 2.8c-.2.1-.4.1-.6-.1-.1-.2-.1-.4.1-.6l3.4-2.6-4.7-3.4v7.1c0 .4.3.6.6.6h12.5c.4 0 .6-.3.6-.6v-7.1z"/></svg></span>
        <span class="label">Email: mcint170@msu.edu</span>
      </a>
    </li>
  

  
    <li><a href="https://github.com/mcint170">
  <span class="icon icon--github"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M8 0C3.58 0 0 3.582 0 8c0 3.535 2.292 6.533 5.47 7.59.4.075.547-.172.547-.385 0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.725-.496.056-.486.056-.486.803.056 1.225.824 1.225.824.714 1.223 1.873.87 2.33.665.072-.517.278-.87.507-1.07-1.777-.2-3.644-.888-3.644-3.953 0-.873.31-1.587.823-2.147-.09-.202-.36-1.015.07-2.117 0 0 .67-.215 2.2.82.64-.178 1.32-.266 2-.27.68.004 1.36.092 2 .27 1.52-1.035 2.19-.82 2.19-.82.43 1.102.16 1.915.08 2.117.51.56.82 1.274.82 2.147 0 3.073-1.87 3.75-3.65 3.947.28.24.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.14.46.55.38C13.71 14.53 16 11.53 16 8c0-4.418-3.582-8-8-8"/></svg></span>
  <span class="label">GitHub</span>
</a>
</li>
  

  

  
    <li><a href="https://www.linkedin.com/in/brandonjmcintyre">
  <span class="icon icon--linkedin"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51v1.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z" fill-rule="nonzero"/></svg></span>
  <span class="label">LinkedIn</span>
</a>
</li>
  
</ul>

      </div>
    </div>

    <div class="canvas">
      <div class="wrapper">
        

<header id="masthead">
  <div class="inner">
    <div class="title-area">
      
        <p class="site-title">
          <a href="/">
            
            <span>Brandon McIntyre</span>
          </a>
        </p>
      
    </div>
  </div>
</header>

        <div class="initial-content">
          <header class="intro">
  
    
    
    
    <div class="intro-image">
      <img src="/assets/images/chocolate-chip-cookies-lg.jpg" alt="Visualizing Lansing Traffic Stop Data">
    </div>
  

  <div class="inner">
    <div class="intro-text">
      <h1 id="page-title" class="intro-title">Visualizing Lansing Traffic Stop Data
</h1>
      

      

      

      
    </div>
  </div>
</header>


<main id="main" class="page-content" aria-label="Content">
  <div class="inner">
    <article class="entry-wrap">
      <div class="entry-content">
        <h3 id="p-styletext-align-right-brandon-mcintyre-p">&lt;p style="text-align: right;"&gt; Brandon McIntyre &lt;/p&gt;</h3>
<h4 id="p-styletext-align-right-analysis-of-lansing-traffic-stops---cmse-402-ss20-p">&lt;p style="text-align: right;"&gt; Analysis of Lansing Traffic Stops <br /> <br /> CMSE 402 SS20 &lt;/p&gt;</h4>

<h1 id="final-writeup">Final Writeup</h1>

<p><strong>Data Used</strong></p>

<p>Traffic Stop Data of Lansing Police Department (02/01/2016 - 02/13/2019):
http://data-lansing.opendata.arcgis.com/datasets/32b48df10c674a7aace77071046ba272_0?selectedAttribute=Date</p>

<p>Census Data/ ACS Data:
https://data.census.gov/cedsci/table?q=Lansing%20MI&amp;g=1600000US2646000&amp;hidePreview=false&amp;tid=ACSDP5Y2018.DP05&amp;vintage=2010&amp;layer=VT_2018_160_00_PY_D1&amp;cid=DP05_0001E</p>

<p><strong>Note</strong></p>

<p>Looking at Lansing Police Department MATS Data Analysis for Year 17 
(https://lansingmi.gov/DocumentCenter/View/6979/MATS-Months193-204-May-2018) 
it is mentioned that using Census Data is not 100% accurate as driver demographics do not necessarily match census demographics. This makes using Census data troublesome. This site 
(https://nij.ojp.gov/topics/articles/racial-profiling-and-traffic-stops)
goes into more detail on the subject. Thus it appears that to get proper comparsion, one must look at the demographics of all licensed holding drivers. This information is only avalible on a state level and only on Sex. 
https://www.fhwa.dot.gov/policyinformation/statistics/2016/dl1c.cfm . 
(Atleast offically recognized datasets that I could find). So with this, I will continue to the use ACS data. However, it may not produce 100% accurate results. I also tried looking for more MATS traffic stop data from lansing department, however I was unable to.<br />
(https://data.census.gov/cedsci/table?q=Lansing%20MI&amp;g=1600000US2646000&amp;hidePreview=false&amp;tid=ACSDP5Y2018.DP05&amp;vintage=2010&amp;layer=VT_2018_160_00_PY_D1&amp;cid=DP05_0001E)</p>

<p>Upon more research I have also found since the writeup a traffic stop analysis for Year 18
(https://lansingmi.gov/ArchiveCenter/ViewFile/Item/655)<br />
and Year 16
https://www.lansingmi.gov/Archive/ViewFile/Item/603</p>

<p><strong>Interesting News since April 1st</strong></p>

<p>Here are some interesting articles just posted on 4/1/20 about this particular issue in the East lansing police department.
(They all say the same excat thing, some with visualizations (That are not particularly good))
(https://www.lansingcitypulse.com/stories/mayor-east-lansing-police-over-stop-black-drivers-which-is-not-acceptable,14053)
(https://www.lansingstatejournal.com/story/news/2020/04/01/east-lansing-wants-changes-after-study-shows-race-bias-police-stops/5102549002/)
(https://eastlansinginfo.org/content/newly-released-data-show-racial-bias-east-lansing-policing)
(https://statenews.com/article/2020/04/elpd-race-data-report-shows-african-americans-over-stopped-in-east-lansing?ct=content_open&amp;cv=cbox_featured)
(https://www.wilx.com/content/news/City-of-East-Lansing-releases-race-data-for-ELPD-officer-initiated-contacts-569281531.html)</p>

<p>The articles state that in the past 2 months there have been an “over-stop of black drivers”. This came from “The East Lansing Police Department began gathering race data on officer-initiated contacts, like traffic stops, in February after a black 19-year-old accused an officer of using excessive force during an arrest. The study was requested by the City Council. “
The study states “Though black residents comprise 8% of East Lansing’s population, they accounted for 22% of police officer-initiated contact in February and March, according to a department study”.</p>

<p>Now this is particualry interesting based upon the fact that the EL study is based upon census data. The Lansing Police department made it specific that Census data is not conclusive based upon the difference between census and actual licensed drivers. The city pulse article actaully references the Lansing Data that I am looking at now and say that similar trends are in the Lansing Traffic stop data as well.</p>

<p>This information is of particular interest because honeslty I don’t know which side to belive. I feel like the issue in this situation stems from the lack of information when it comes to demographics on lisenced drivers. Not having this causes Lansing police to say that there is no racial biasness, yet EL police department to say that there is a bias and they want to correct it. Who is in the wrong and who is in the right?</p>

<p>I have tried to find the data from EL that the study is on, but all I can seem to find are there weekly reports that do not include the race (https://www.cityofeastlansing.com/Archive.aspx?AMID=47). Further more, another point of interest on this topic, the annual report that EL police deparment puts out does not include race in any manner (https://www.cityofeastlansing.com/DocumentCenter/View/910/ELPD-Annual-Report-2019-PDF?bidId=). Leading me to think that EL is not as experinced when it comes to the lansing department when it comes to answering the question of racial biasing.</p>

<h3 id="links">Links</h3>

<p><strong>Variable: Exploration and Plots</strong></p>

<ul>
  <li><a href="#Date">Date: Year,Month,Day,Hour,Min</a></li>
  <li><a href="#Reason_for_Stop">Reason for Stop</a></li>
  <li><a href="#Race_Ethnicity">Race/Ethnicity</a></li>
  <li><a href="#Gender">Gender</a></li>
  <li><a href="#Age">Analysis of Age</a></li>
  <li><a href="#Search_Performed">Search Performed</a></li>
  <li><a href="#Search_Authority">Search Authority</a></li>
  <li><a href="#Discovery_If_Searched">Discovery If_Searched</a></li>
  <li><a href="#Result_of_Stop">Result of Stop</a></li>
  <li><a href="#Officer_Badge">Officer Badge</a></li>
</ul>

<p><strong>Questions</strong></p>

<ul>
  <li><a href="#Search">Individuals who were searched vs not searched is there a link to demographics?</a></li>
  <li><a href="#Harsh">Is there any demographic subjected to harsher punishment across traffic stop results by Reason for Stop,
Reason for Search, Search Preformed, Search Discovery and Search Authority, and Result?</a></li>
  <li><a href="#Street">Is there a trend by Age of which certain demographics are pulled over?</a></li>
  <li><a href="#Officer">Is there any officer that is pulling over a disproportionate percentage of individuals from
a given demographic?</a></li>
  <li><a href="#Time">Are certain demographics more targeted per time of day of the traffic stop?</a></li>
</ul>

<p><strong>Libraries</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">pytz</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="n">mtick</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div>

<h3 id="load-in-data">Load in Data</h3>

<p><strong>Traffic Stop Data</strong></p>

<p>Data came not sorted. Data was sorted by time. Time was also off by 5 hours as it was given in GMT. The data was corrected to be moved to EST</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"./Traffic_Stops.csv"</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s">"Date"</span><span class="p">])</span>
<span class="n">traffic</span><span class="p">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s">"Date"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">traffic</span><span class="p">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">]</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="n">pytz</span><span class="p">.</span><span class="n">timezone</span><span class="p">(</span><span class="s">'US/Eastern'</span><span class="p">))</span>
<span class="n">traffic</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Team_Area</th>
      <th>Street_Area</th>
      <th>Reason_for_Stop</th>
      <th>Race_Ethnicity</th>
      <th>Gender</th>
      <th>Age</th>
      <th>Search_Performed</th>
      <th>Search_Authority</th>
      <th>Discovery_If_Searched</th>
      <th>Result_of_Stop</th>
      <th>Officer_Badge</th>
      <th>Traffic_Crash</th>
      <th>Serial_Number</th>
      <th>ObjectId</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>2016-02-01 00:03:00-05:00</td>
      <td>4</td>
      <td>Jolly</td>
      <td>Equipment Violation</td>
      <td>White</td>
      <td>Male</td>
      <td>23</td>
      <td>None</td>
      <td></td>
      <td></td>
      <td>Citation</td>
      <td>158</td>
      <td>No</td>
      <td>48071</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2016-02-01 00:04:00-05:00</td>
      <td>1</td>
      <td>Oakland</td>
      <td>Equipment Violation</td>
      <td>Unknown</td>
      <td>Male</td>
      <td>42</td>
      <td>None</td>
      <td></td>
      <td></td>
      <td>Citation</td>
      <td>225</td>
      <td>No</td>
      <td>48072</td>
      <td>3</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2016-02-01 00:12:00-05:00</td>
      <td>3</td>
      <td>Other</td>
      <td>Equipment Violation</td>
      <td>African-American/Black</td>
      <td>Male</td>
      <td>31</td>
      <td>None</td>
      <td></td>
      <td></td>
      <td>Citation</td>
      <td>62</td>
      <td>No</td>
      <td>48073</td>
      <td>4</td>
    </tr>
    <tr>
      <td>3</td>
      <td>2016-02-01 00:37:00-05:00</td>
      <td>4</td>
      <td>Oakland</td>
      <td>Moving Violation</td>
      <td>African-American/Black</td>
      <td>Female</td>
      <td>21</td>
      <td>None</td>
      <td></td>
      <td></td>
      <td>Citation</td>
      <td>158</td>
      <td>No</td>
      <td>48074</td>
      <td>7</td>
    </tr>
    <tr>
      <td>4</td>
      <td>2016-02-01 00:40:00-05:00</td>
      <td>4</td>
      <td>Cedar</td>
      <td>Moving Violation</td>
      <td>White</td>
      <td>Female</td>
      <td>33</td>
      <td>None</td>
      <td></td>
      <td></td>
      <td>Warning</td>
      <td>124</td>
      <td>No</td>
      <td>48075</td>
      <td>8</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>20644</td>
      <td>2019-02-12 14:00:00-05:00</td>
      <td>1</td>
      <td>M.L. King Jr.</td>
      <td>Other</td>
      <td>African-American/Black</td>
      <td>Male</td>
      <td>42</td>
      <td>Driver</td>
      <td>Incident to Arrest</td>
      <td>Nothing</td>
      <td>Arrest</td>
      <td>89</td>
      <td>No</td>
      <td>73879</td>
      <td>20645</td>
    </tr>
    <tr>
      <td>20645</td>
      <td>2019-02-12 14:06:00-05:00</td>
      <td>1</td>
      <td>Saginaw</td>
      <td>Moving Violation</td>
      <td>White</td>
      <td>Male</td>
      <td>33</td>
      <td>None</td>
      <td></td>
      <td></td>
      <td>Warning</td>
      <td>202</td>
      <td>No</td>
      <td>73875</td>
      <td>20646</td>
    </tr>
    <tr>
      <td>20646</td>
      <td>2019-02-12 14:39:00-05:00</td>
      <td>1</td>
      <td>Other</td>
      <td>Registration</td>
      <td>Unknown</td>
      <td>Male</td>
      <td>28</td>
      <td>None</td>
      <td></td>
      <td></td>
      <td>Citation</td>
      <td>202</td>
      <td>No</td>
      <td>73877</td>
      <td>20647</td>
    </tr>
    <tr>
      <td>20647</td>
      <td>2019-02-12 16:02:00-05:00</td>
      <td>2</td>
      <td>Michigan</td>
      <td>Registration</td>
      <td>White</td>
      <td>Female</td>
      <td>26</td>
      <td>None</td>
      <td></td>
      <td></td>
      <td>Citation</td>
      <td>245</td>
      <td>No</td>
      <td>73881</td>
      <td>20648</td>
    </tr>
    <tr>
      <td>20648</td>
      <td>2019-02-12 19:36:00-05:00</td>
      <td>2</td>
      <td>Michigan</td>
      <td>Equipment Violation</td>
      <td>African-American/Black</td>
      <td>Female</td>
      <td>23</td>
      <td>None</td>
      <td></td>
      <td>Nothing</td>
      <td>Warning</td>
      <td>149</td>
      <td>No</td>
      <td>73883</td>
      <td>20649</td>
    </tr>
  </tbody>
</table>
<p>20649 rows × 15 columns</p>
</div>

<p>Add an “Hour” Column for later use</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">hour</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">.</span><span class="n">columns</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Index(['Date', 'Team_Area', 'Street_Area', 'Reason_for_Stop', 'Race_Ethnicity',
       'Gender', 'Age', 'Search_Performed', 'Search_Authority',
       'Discovery_If_Searched', 'Result_of_Stop', 'Officer_Badge',
       'Traffic_Crash', 'Serial_Number', 'ObjectId', 'Hour'],
      dtype='object')
</code></pre></div></div>

<p><em>Subsets of MATS report’s Data</em></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">year16</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="s">'2016-02-12 00:00:00-05:00'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">]</span> <span class="o">&lt;=</span>
<span class="s">'2017-02-11 23:59:59-05:00'</span><span class="p">)]</span>
<span class="n">year17</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="s">'2017-02-12 00:00:00-05:00'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">]</span> <span class="o">&lt;=</span>
<span class="s">'2018-02-11 23:59:59-05:00'</span><span class="p">)]</span>
<span class="c1">#Not sure why they skipped 02-12-2018?
</span><span class="n">year18</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="s">'2018-02-13 00:00:00-05:00'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">]</span> <span class="o">&lt;=</span>
<span class="s">'2019-02-12 23:59:59-05:00'</span><span class="p">)]</span>
</code></pre></div></div>

<p><strong>Census Data</strong></p>

<p>Another issue with the census Data I have found is th the races are not clearly seperated. I cannot make 100% devided between the values of the traffic stop races and the races reported on the census. This is due to the fact that hispanic and latino is a seperate section in the census. There is a section called “Two or more races” that makes this hard to calculate. I will therefore only add together Under the Latino Section the single races plus latino and leave out the double races. This will hopefully evenly distribute the 6% that is more than one race.</p>

<p>The excel is included (census_calc.xlsx) that has all the numbers and calculations I used to get the percentages of each race and gender. What I am loading in is the csv that uses the same values from the calcualtion excel file, but minus all of the formulas for easy load in to pandas</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"./ACS_data/census.csv"</span><span class="p">)</span>
<span class="n">census_2016</span> <span class="o">=</span> <span class="n">census</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">census_2017</span> <span class="o">=</span> <span class="n">census</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">census_2018</span> <span class="o">=</span> <span class="n">census</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">census_ALL</span> <span class="o">=</span> <span class="n">census</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">census</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Year</th>
      <th>Male</th>
      <th>Female</th>
      <th>White</th>
      <th>Black</th>
      <th>Native</th>
      <th>Asian_Pacific</th>
      <th>Hispanic</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>2016</td>
      <td>0.479</td>
      <td>0.521</td>
      <td>0.593992</td>
      <td>0.228385</td>
      <td>0.004449</td>
      <td>0.041471</td>
      <td>0.131703</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2017</td>
      <td>0.475</td>
      <td>0.525</td>
      <td>0.562655</td>
      <td>0.234408</td>
      <td>0.003599</td>
      <td>0.063806</td>
      <td>0.135532</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2018</td>
      <td>0.462</td>
      <td>0.538</td>
      <td>0.576798</td>
      <td>0.234277</td>
      <td>0.003184</td>
      <td>0.037995</td>
      <td>0.147745</td>
    </tr>
    <tr>
      <td>3</td>
      <td>ALL</td>
      <td>0.480</td>
      <td>0.520</td>
      <td>0.590836</td>
      <td>0.230128</td>
      <td>0.004314</td>
      <td>0.039975</td>
      <td>0.134747</td>
    </tr>
  </tbody>
</table>
</div>

<h3 id="visualization-exploration-of-data">Visualization Exploration of Data</h3>

<p><strong>Analysis of Traffic Stops Overtime</strong>
<a id="Date"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">"Hour"</span><span class="p">).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2907411c9c8&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_22_1.png" alt="png" /></p>

<p>Now looking at the MATS report for year 18 (February 13, 2018, through February 12, 2019).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">year18</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">hour</span><span class="p">).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2907407e248&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_24_1.png" alt="png" /></p>

<p>MATS report plot for comparison from Year 18</p>

<p><img src="MATS_hour.PNG" alt="" /></p>

<p><strong>Reason for Stop</strong>
<a id="Reason_for_Stop"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Reason_for_Stop"</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['Equipment Violation', 'Moving Violation', 'Other', 'Registration',
       'Investigative Stop'], dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Reason_for_Stop"</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 5 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_30_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_reason</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Reason_for_Stop"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_reason</span> <span class="o">=</span> <span class="n">by_reason</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Reason_for_Stop"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_reason</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="p">[</span><span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c1">#plt.title("Reason for Traffic Stop by Hour")
</span></code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_31_0.png" alt="png" /></p>

<p><strong>Race/Ethnicity</strong>
<a id="Race_Ethnicity"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['White', 'Unknown', 'African-American/Black',
       'Asian-Pacific Islander', 'Hispanic', 'Native American'],
      dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 6 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_34_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">counts_race</span> <span class="o">=</span> <span class="s">"{}:{} , {}:{} , {}:{} , {}:{} , {}:{} , {}:{}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">counts</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">counts</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">values</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="n">counts</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="n">values</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">counts</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">counts_race</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>African-American/Black:6728 , Asian-Pacific Islander:319 , Hispanic:1334 , Native American:11 , Unknown:2109 , White:10148
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">races_total</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">j</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
    <span class="n">races_total</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span>
<span class="n">races_total</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'African-American/Black': 6728,
 'Asian-Pacific Islander': 319,
 'Hispanic': 1334,
 'Native American': 11,
 'Unknown': 2109,
 'White': 10148}
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_percentage</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">j</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="s">"Unknown"</span><span class="p">):</span>
        <span class="k">continue</span>
    <span class="n">race_percentage</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">"Unknown"</span><span class="p">])</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span>
<span class="n">race_percentage</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'African-American/Black': 0.362891046386192,
 'Asian-Pacific Islander': 0.01720604099244876,
 'Hispanic': 0.07195253505933118,
 'Native American': 0.0005933117583603021,
 'White': 0.11375404530744336}
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_race</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Race_Ethnicity"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_race</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_race</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="p">[</span><span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c1">#plt.title("Race by Traffic Stop by Hour")
</span></code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_38_0.png" alt="png" /></p>

<p><strong>Gender</strong>
<a id="Gender"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Gender"</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['Male', 'Female'], dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Gender"</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 2 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_41_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_gender</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Gender"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_gender</span> <span class="o">=</span> <span class="n">by_gender</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Gender"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_gender</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="p">[</span><span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_42_0.png" alt="png" /></p>

<p><strong>Analysis of Age</strong>
<a id="Age"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Sorted_age_indx</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Age"</span><span class="p">].</span><span class="n">values</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Age"</span><span class="p">][</span><span class="n">Sorted_age_indx</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([-7167, -7154, -6181,  -977,  -955,     0,     1,     2,    11,
          12,    13,    14,    15,    16,    17,    18,    19,    20,
          21,    22,    23,    24,    25,    26,    27,    28,    29,
          30,    31,    32,    33,    34,    35,    36,    37,    38,
          39,    40,    41,    42,    43,    44,    45,    46,    47,
          48,    49,    50,    51,    52,    53,    54,    55,    56,
          57,    58,    59,    60,    61,    62,    63,    64,    65,
          66,    67,    68,    69,    70,    71,    72,    73,    74,
          75,    76,    77,    78,    79,    80,    81,    82,    83,
          84,    85,    86,    87,    88,    89,    90,    91,    92,
          93,   101,   120,   121], dtype=int64)
</code></pre></div></div>

<p>Ok Lets assume anyone lower than 14 is not correct, however, it could be true. I will just take 14 and up since typically you can start drivers training at 14 and 9 months in michigan. Also there is a jump after 93 to 101. It may be true that are drivers older than 93 however, I will exclude the data because it could be an error.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Age_corrected_filter</span> <span class="o">=</span> <span class="p">((</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Age"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">13</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Age"</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">94</span><span class="p">))</span>
<span class="n">traffic</span><span class="p">[</span><span class="s">"Age"</span><span class="p">][</span><span class="n">Sorted_age_indx</span><span class="p">][</span><span class="n">Age_corrected_filter</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
       31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,
       48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64,
       65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81,
       82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93], dtype=int64)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Age"</span><span class="p">][</span><span class="n">Age_corrected_filter</span><span class="p">].</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x29074c7bd48&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_48_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<p><strong>Search Performed</strong>
<a id="Search_Performed"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">'Search_Performed'</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['None', 'Driver', 'Vehicle', nan, 'Passenger'], dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">search_p_clean</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[</span><span class="o">~</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Search_Performed"</span><span class="p">].</span><span class="n">isnull</span><span class="p">()]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Will need to look into values, probably something to do with the nan value
</span><span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">search_p_clean</span><span class="p">[</span><span class="s">"Search_Performed"</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 4 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_53_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_door</span> <span class="o">=</span> <span class="n">search_p_clean</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Search_Performed"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_door</span> <span class="o">=</span> <span class="n">by_door</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Search_Performed"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_door</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="p">[</span><span class="n">search_p_clean</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_54_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">search_p_positive_clean</span> <span class="o">=</span> <span class="n">search_p_clean</span><span class="p">[</span><span class="n">search_p_clean</span><span class="p">[</span><span class="s">"Search_Performed"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">"None"</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_door</span> <span class="o">=</span> <span class="n">search_p_positive_clean</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Search_Performed"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_door</span> <span class="o">=</span> <span class="n">by_door</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Search_Performed"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_door</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="p">[</span><span class="n">search_p_positive_clean</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_56_0.png" alt="png" /></p>

<p><strong>Search Authority</strong>
<a id="Search_Authority"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">'Search_Authority'</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['      ', 'Incident to Arrest', 'Terry Cursory', 'Consent',
       'Plain View', 'Tow Inventory', 'Parole/Probation'], dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"Total number not searched"</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Search_Authority"</span><span class="p">]</span> <span class="o">==</span> <span class="s">'      '</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Total number searched"</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Search_Authority"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'      '</span><span class="p">]))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Total number not searched 18748
Total number searched 1901
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">search_clean</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Search_Authority"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'      '</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">search_clean</span><span class="p">[</span><span class="s">"Search_Authority"</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 6 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_61_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_search</span> <span class="o">=</span> <span class="n">search_clean</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Search_Authority"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_search</span> <span class="o">=</span> <span class="n">by_search</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Search_Authority"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_search</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="p">[</span><span class="n">search_clean</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_62_0.png" alt="png" /></p>

<p><strong>Discovery If Searched</strong>
<a id="Discovery_If_Searched"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">'Discovery_If_Searched'</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['       ', 'Nothing', 'Alcohol', 'Drugs', 'Drugs/ Alcohol', 'Cash',
       'Other Property', 'Drugs/ Cash', 'Weapon/ Drugs', 'Weapon',
       'Vehicle/ Drugs', 'Drugs/ Other Property', 'Cash/ Other Property',
       'Vehicle/ Alcohol/ Cash', 'Drugs/ Alcohol/ Cash/ Other Property',
       'Vehicle/ Alcohol', 'Vehicle', 'Weapon/ Drugs/ Alcohol',
       'Weapon/ Drugs/ Cash', 'Weapon/ Vehicle', 'Weapon/ Vehicle/ Cash',
       'Weapons/ Drugs/ Other Property', 'Weapon/ Drugs/ Other Property',
       'Vehicle/ Other Property', 'Vehicle/ Drugs/ Cash',
       'Vehicle/ Drugs/ Cash/ Other Property',
       'Weapon/ Vehicle/ Drugs/ Cash', 'Vehicle/ Cash/ Other Property',
       'Drugs/ Alcohol/ Cash', 'Weapon/ Other Property',
       'Alcohol/ Other Property', 'Alcohol/ Cash'], dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"Total number not searched"</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">==</span> <span class="s">'       '</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Total number searched"</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'       '</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Total number searched, but nothing found"</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">traffic</span><span class="p">[(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'       '</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">==</span> <span class="s">'Nothing'</span><span class="p">)]))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Total number searched and discovery made"</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">traffic</span><span class="p">[(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'       '</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'Nothing'</span><span class="p">)]))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Total number not searched 18512
Total number searched 2137
Total number searched, but nothing found 1547
Total number searched and discovery made 590
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">discovery_clean</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'       '</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">discovery_clean</span><span class="p">[</span><span class="s">'Discovery_If_Searched'</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 31 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_67_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">counts</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([  95,    1,    1,   20,   10,  216,   17,    1,    1,   12,   10,
       1547,   66,   41,    4,    1,    3,   14,    6,    1,    2,   36,
         19,    5,    2,    1,    1,    1,    1,    1,    1], dtype=int64)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_discovery</span> <span class="o">=</span> <span class="n">discovery_clean</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Discovery_If_Searched"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_discovery</span> <span class="o">=</span> <span class="n">by_discovery</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Discovery_If_Searched"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_discovery</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">40</span><span class="p">))</span>
<span class="p">[</span><span class="n">discovery_clean</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_69_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">discovery_clean_positive</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'       '</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'Nothing'</span><span class="p">)]</span>
<span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">discovery_clean_positive</span><span class="p">[</span><span class="s">'Discovery_If_Searched'</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 30 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_70_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_discovery_positive</span> <span class="o">=</span> <span class="n">discovery_clean_positive</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Discovery_If_Searched"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_discovery_positive</span> <span class="o">=</span> <span class="n">by_discovery_positive</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Discovery_If_Searched"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_discovery_positive</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">40</span><span class="p">))</span>
<span class="p">[</span><span class="n">discovery_clean_positive</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_71_0.png" alt="png" /></p>

<p><strong>Result of Stop</strong>
<a id="Result_of_Stop"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">'Result_of_Stop'</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['Citation', 'Warning', 'Arrest', '    ', 'Report'], dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Result_of_Stop"</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 5 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_74_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_result</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">,</span><span class="s">"Result_of_Stop"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_result</span> <span class="o">=</span> <span class="n">by_result</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Hour"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Result_of_Stop"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_result</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span><span class="n">subplots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mf">7.5</span><span class="p">))</span>
<span class="p">[</span><span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">"bar"</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"gray"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">plt</span><span class="p">.</span><span class="n">gcf</span><span class="p">().</span><span class="n">axes</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_75_0.png" alt="png" /></p>

<p><strong>Officer Badge</strong>
<a id="Officer_Badge"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">'Officer_Badge'</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([158, 225,  62, 124, 152,  71,  50, 112, 337, 334, 132, 169, 390,
        35,  87,  44,  96, 220, 165,  74,  49,  97, 154,  82,  86, 143,
       176,   2,  89, 391, 215, 160,  37,  85, 197, 185,  52,  59,  28,
       222, 305,  40, 212, 211, 110, 442, 153,  64,  22,  84, 376,   0,
       118,   8, 312,  36, 345, 378, 140,  63,  79, 100,  54, 177,   3,
       324, 339, 398,   7,  23, 319, 142, 344,  46, 128,  81, 317, 168,
       175,  21,  27, 201, 307,  67, 226, 164, 358, 146, 127, 351, 353,
       101, 347,  38, 355, 134, 230, 129, 309, 457,  47,  48, 326,  29,
        14,  66,  83, 188, 103,  94,  11, 136,  80,  34, 335, 122, 414,
       408, 181,  69,  75, 308,  12,  43,  57,  45, 108, 125, 145,  51,
        72, 117, 120, 182, 428, 354, 472, 245, 111, 123,  70, 130, 387,
        31,  53, 135,   6, 203, 106,  91, 139, 167,  90,  41,  99, 191,
       121, 196, 202, 131, 200,  76,  92,   4, 228,  16, 186, 126, 115,
       119, 151, 104, 150, 190, 149, 193, 137, 170, 148, 113], dtype=int64)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Sorted_badge_indx</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">'Officer_Badge'</span><span class="p">].</span><span class="n">values</span><span class="p">)</span>
<span class="n">traffic</span><span class="p">[</span><span class="s">'Officer_Badge'</span><span class="p">][</span><span class="n">Sorted_badge_indx</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([  0,   2,   3,   4,   6,   7,   8,  11,  12,  14,  16,  21,  22,
        23,  27,  28,  29,  31,  34,  35,  36,  37,  38,  40,  41,  43,
        44,  45,  46,  47,  48,  49,  50,  51,  52,  53,  54,  57,  59,
        62,  63,  64,  66,  67,  69,  70,  71,  72,  74,  75,  76,  79,
        80,  81,  82,  83,  84,  85,  86,  87,  89,  90,  91,  92,  94,
        96,  97,  99, 100, 101, 103, 104, 106, 108, 110, 111, 112, 113,
       115, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128,
       129, 130, 131, 132, 134, 135, 136, 137, 139, 140, 142, 143, 145,
       146, 148, 149, 150, 151, 152, 153, 154, 158, 160, 164, 165, 167,
       168, 169, 170, 175, 176, 177, 181, 182, 185, 186, 188, 190, 191,
       193, 196, 197, 200, 201, 202, 203, 211, 212, 215, 220, 222, 225,
       226, 228, 230, 245, 305, 307, 308, 309, 312, 317, 319, 324, 326,
       334, 335, 337, 339, 344, 345, 347, 351, 353, 354, 355, 358, 376,
       378, 387, 390, 391, 398, 408, 414, 428, 442, 457, 472], dtype=int64)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Why is there some officers with a bunch?
</span><span class="n">values</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">unique</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">"Officer_Badge"</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">barh</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="n">counts</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BarContainer object of 180 artists&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_79_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Officers that have made over 100 stops
</span><span class="n">officer_100</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">counts</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mask</span> <span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">traffic</span><span class="p">[</span><span class="s">"Officer_Badge"</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">officer_100</span><span class="p">:</span>
        <span class="n">mask</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mask</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">officer_top</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</code></pre></div></div>

<h3 id="questions">Questions</h3>

<p><strong>Individuals who were searched vs not searched is there a link to demographics?</strong> <strong>/</strong> 
<a id="Search"></a>
<strong>Is there any demographic subjected to harsher punishment across traffic stop results?</strong>
<a id="Harsh"></a></p>

<p><em>Disclaimer</em></p>

<p>Due to the nature of the stops and the fact that there can be multiple autorites to arrest and search. The values are hard to correct if they are errored or not. For example there may be situations where there exist multiple columns that logically do not flow together (No search, but incident to arrest, and finding something, and no arrest). Thus no values will be purged as purging will result in data loss that may be not deserving of purging.</p>

<p>However, I will only be going off the accuracy if the table says the search was preformed. I will not edit the table if other rows seem like this answer should be yes.</p>

<p>Also this would be best served as a combined visualization. I do not have it made yet, however, the idea is that I will create a count for each column under the “Search” and make a giant heat map with a diverging colormap from the census data.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">.</span><span class="n">columns</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Index(['Date', 'Team_Area', 'Street_Area', 'Reason_for_Stop', 'Race_Ethnicity',
       'Gender', 'Age', 'Search_Performed', 'Search_Authority',
       'Discovery_If_Searched', 'Result_of_Stop', 'Officer_Badge',
       'Traffic_Crash', 'Serial_Number', 'ObjectId', 'Hour'],
      dtype='object')
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">counts_race</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>African-American/Black:6728 , Asian-Pacific Islander:319 , Hispanic:1334 , Native American:11 , Unknown:2109 , White:10148
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census_race</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"White"</span><span class="p">],</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Black"</span><span class="p">],</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">],</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Asian_Pacific"</span><span class="p">],</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Native"</span><span class="p">]]</span>
<span class="n">census_race_mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_race</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="n">census_race_mask</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[[0.5908361910000001,
  0.230127567,
  0.13474726199999998,
  0.039975298,
  0.004313682],
 [0.5908361910000001,
  0.230127567,
  0.13474726199999998,
  0.039975298,
  0.004313682],
 [0.5908361910000001,
  0.230127567,
  0.13474726199999998,
  0.039975298,
  0.004313682],
 [0.5908361910000001,
  0.230127567,
  0.13474726199999998,
  0.039975298,
  0.004313682],
 [0.5908361910000001,
  0.230127567,
  0.13474726199999998,
  0.039975298,
  0.004313682]]
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census_race_mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_race</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="n">by_result</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="s">"Result_of_Stop"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_result</span> <span class="o">=</span> <span class="n">by_result</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Result_of_Stop"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_result</span> <span class="o">=</span> <span class="n">by_result</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Unknown"</span><span class="p">)</span>
<span class="n">total_mask</span><span class="o">=</span><span class="n">by_result</span><span class="p">.</span><span class="nb">sum</span><span class="p">().</span><span class="n">values</span>
<span class="n">by_result</span> <span class="o">=</span> <span class="n">by_result</span><span class="p">.</span><span class="n">reindex</span><span class="p">([</span><span class="s">"White"</span><span class="p">,</span> <span class="s">"African-American/Black"</span><span class="p">,</span> <span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">])</span>
<span class="n">by_result</span> <span class="o">=</span> <span class="n">by_result</span><span class="p">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">'    '</span><span class="p">:</span><span class="s">"None"</span><span class="p">})</span>
<span class="n">by_result_comp</span> <span class="o">=</span> <span class="p">(</span><span class="n">by_result</span><span class="o">/</span><span class="n">total_mask</span><span class="p">)</span><span class="c1">#-census_race_mask
</span><span class="n">by_result_comp</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Result_of_Stop</th>
      <th>None</th>
      <th>Arrest</th>
      <th>Citation</th>
      <th>Report</th>
      <th>Warning</th>
    </tr>
    <tr>
      <th>Race_Ethnicity</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>White</td>
      <td>0.491525</td>
      <td>0.340153</td>
      <td>0.561575</td>
      <td>0.411765</td>
      <td>0.517007</td>
    </tr>
    <tr>
      <td>African-American/Black</td>
      <td>0.355932</td>
      <td>0.570332</td>
      <td>0.352537</td>
      <td>0.470588</td>
      <td>0.379906</td>
    </tr>
    <tr>
      <td>Hispanic</td>
      <td>0.135593</td>
      <td>0.084399</td>
      <td>0.068627</td>
      <td>0.058824</td>
      <td>0.082156</td>
    </tr>
    <tr>
      <td>Asian-Pacific Islander</td>
      <td>NaN</td>
      <td>0.005115</td>
      <td>0.016911</td>
      <td>0.058824</td>
      <td>0.019623</td>
    </tr>
    <tr>
      <td>Native American</td>
      <td>0.016949</td>
      <td>NaN</td>
      <td>0.000351</td>
      <td>NaN</td>
      <td>0.001308</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census_race_mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_race</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="n">by_reason</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="s">"Reason_for_Stop"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_reason</span> <span class="o">=</span> <span class="n">by_reason</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Reason_for_Stop"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_reason</span> <span class="o">=</span> <span class="n">by_reason</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Unknown"</span><span class="p">)</span>
<span class="n">total_mask</span><span class="o">=</span><span class="n">by_reason</span><span class="p">.</span><span class="nb">sum</span><span class="p">().</span><span class="n">values</span>
<span class="n">by_reason</span> <span class="o">=</span> <span class="n">by_reason</span><span class="p">.</span><span class="n">reindex</span><span class="p">([</span><span class="s">"White"</span><span class="p">,</span> <span class="s">"African-American/Black"</span><span class="p">,</span> <span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">])</span>
<span class="n">by_reason_comp</span> <span class="o">=</span> <span class="p">(</span><span class="n">by_reason</span><span class="o">/</span><span class="n">total_mask</span><span class="p">)</span><span class="c1">#-census_race_mask
</span><span class="n">by_reason_comp</span><span class="c1">#.plot()
</span></code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Reason_for_Stop</th>
      <th>Equipment Violation</th>
      <th>Investigative Stop</th>
      <th>Moving Violation</th>
      <th>Other</th>
      <th>Registration</th>
    </tr>
    <tr>
      <th>Race_Ethnicity</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>White</td>
      <td>0.482554</td>
      <td>0.520436</td>
      <td>0.567977</td>
      <td>0.372263</td>
      <td>0.556291</td>
    </tr>
    <tr>
      <td>African-American/Black</td>
      <td>0.423077</td>
      <td>0.408719</td>
      <td>0.338536</td>
      <td>0.558394</td>
      <td>0.369915</td>
    </tr>
    <tr>
      <td>Hispanic</td>
      <td>0.079699</td>
      <td>0.064033</td>
      <td>0.072651</td>
      <td>0.060219</td>
      <td>0.064333</td>
    </tr>
    <tr>
      <td>Asian-Pacific Islander</td>
      <td>0.013878</td>
      <td>0.006812</td>
      <td>0.020282</td>
      <td>0.005474</td>
      <td>0.009461</td>
    </tr>
    <tr>
      <td>Native American</td>
      <td>0.000793</td>
      <td>NaN</td>
      <td>0.000555</td>
      <td>0.003650</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<p>I don’t think how they were searched as much as the fact they were searched is important</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census_race_mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_race</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>
<span class="n">by_authority</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="s">"Search_Authority"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_authority</span> <span class="o">=</span> <span class="n">by_authority</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Search_Authority"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_authority</span> <span class="o">=</span> <span class="n">by_authority</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Unknown"</span><span class="p">)</span>
<span class="n">total_mask</span><span class="o">=</span><span class="n">by_authority</span><span class="p">.</span><span class="nb">sum</span><span class="p">().</span><span class="n">values</span>
<span class="n">by_authority</span> <span class="o">=</span> <span class="n">by_authority</span><span class="p">.</span><span class="n">reindex</span><span class="p">([</span><span class="s">"White"</span><span class="p">,</span> <span class="s">"African-American/Black"</span><span class="p">,</span> <span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">])</span>
<span class="n">by_authority_comp</span> <span class="o">=</span> <span class="p">(</span><span class="n">by_authority</span><span class="o">/</span><span class="n">total_mask</span><span class="p">)</span><span class="o">-</span><span class="n">census_race_mask</span>
<span class="n">by_authority_comp</span><span class="c1">#.plot()
</span></code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Search_Authority</th>
      <th></th>
      <th>Consent</th>
      <th>Incident to Arrest</th>
      <th>Parole/Probation</th>
      <th>Plain View</th>
      <th>Terry Cursory</th>
      <th>Tow Inventory</th>
    </tr>
    <tr>
      <th>Race_Ethnicity</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>White</td>
      <td>-0.020120</td>
      <td>-0.262760</td>
      <td>-0.266736</td>
      <td>-0.340836</td>
      <td>-0.322086</td>
      <td>-0.344459</td>
      <td>-0.313058</td>
    </tr>
    <tr>
      <td>African-American/Black</td>
      <td>0.108231</td>
      <td>0.356623</td>
      <td>0.372827</td>
      <td>0.269872</td>
      <td>0.419872</td>
      <td>0.451032</td>
      <td>0.380984</td>
    </tr>
    <tr>
      <td>Hispanic</td>
      <td>-0.062874</td>
      <td>-0.049574</td>
      <td>-0.066419</td>
      <td>0.115253</td>
      <td>-0.065997</td>
      <td>-0.062283</td>
      <td>-0.060673</td>
    </tr>
    <tr>
      <td>Asian-Pacific Islander</td>
      <td>-0.021517</td>
      <td>NaN</td>
      <td>-0.036282</td>
      <td>NaN</td>
      <td>-0.027475</td>
      <td>NaN</td>
      <td>-0.002938</td>
    </tr>
    <tr>
      <td>Native American</td>
      <td>-0.003720</td>
      <td>NaN</td>
      <td>-0.003390</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">search</span> <span class="o">=</span> <span class="n">by_authority</span><span class="p">[[</span><span class="s">"Consent"</span><span class="p">,</span><span class="s">"Incident to Arrest"</span><span class="p">,</span><span class="s">"Parole/Probation"</span><span class="p">,</span><span class="s">"Plain View"</span><span class="p">,</span><span class="s">"Terry Cursory"</span><span class="p">,</span><span class="s">"Tow Inventory"</span><span class="p">]].</span><span class="nb">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">no_search</span> <span class="o">=</span> <span class="n">by_authority</span><span class="p">[</span><span class="s">'      '</span><span class="p">]</span>
<span class="n">A_search_nosearch</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">no_search</span><span class="p">,</span><span class="n">search</span><span class="p">])</span>
<span class="n">A_search_nosearch</span> <span class="o">=</span> <span class="n">A_search_nosearch</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">'      '</span><span class="p">:</span> <span class="s">"Not_Searched"</span><span class="p">,</span><span class="s">"Unnamed 0"</span><span class="p">:</span> <span class="s">"Searched"</span><span class="p">})</span>

<span class="n">total_mask</span><span class="o">=</span><span class="n">A_search_nosearch</span><span class="p">.</span><span class="nb">sum</span><span class="p">().</span><span class="n">values</span>
<span class="n">census_race_mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_race</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>
<span class="n">A_search_nosearch_comp</span> <span class="o">=</span> <span class="p">(</span><span class="n">A_search_nosearch</span><span class="o">/</span><span class="n">total_mask</span><span class="p">)</span><span class="c1">#-census_race_mask
</span><span class="n">A_search_nosearch</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Not_Searched</th>
      <th>Searched</th>
    </tr>
    <tr>
      <th>Race_Ethnicity</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>White</td>
      <td>9616.0</td>
      <td>532.0</td>
    </tr>
    <tr>
      <td>African-American/Black</td>
      <td>5701.0</td>
      <td>1027.0</td>
    </tr>
    <tr>
      <td>Hispanic</td>
      <td>1211.0</td>
      <td>123.0</td>
    </tr>
    <tr>
      <td>Asian-Pacific Islander</td>
      <td>311.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <td>Native American</td>
      <td>10.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>I don’t think what was discoverd is as important as if they discovered anything</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Discovery_If_Searched"</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['       ', 'Nothing', 'Alcohol', 'Drugs', 'Drugs/ Alcohol', 'Cash',
       'Other Property', 'Drugs/ Cash', 'Weapon/ Drugs', 'Weapon',
       'Vehicle/ Drugs', 'Drugs/ Other Property', 'Cash/ Other Property',
       'Vehicle/ Alcohol/ Cash', 'Drugs/ Alcohol/ Cash/ Other Property',
       'Vehicle/ Alcohol', 'Vehicle', 'Weapon/ Drugs/ Alcohol',
       'Weapon/ Drugs/ Cash', 'Weapon/ Vehicle', 'Weapon/ Vehicle/ Cash',
       'Weapons/ Drugs/ Other Property', 'Weapon/ Drugs/ Other Property',
       'Vehicle/ Other Property', 'Vehicle/ Drugs/ Cash',
       'Vehicle/ Drugs/ Cash/ Other Property',
       'Weapon/ Vehicle/ Drugs/ Cash', 'Vehicle/ Cash/ Other Property',
       'Drugs/ Alcohol/ Cash', 'Weapon/ Other Property',
       'Alcohol/ Other Property', 'Alcohol/ Cash'], dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census_race_mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_race</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">32</span><span class="p">)]</span>
<span class="n">by_discovery</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="s">'Discovery_If_Searched'</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_discovery</span> <span class="o">=</span> <span class="n">by_discovery</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">'Discovery_If_Searched'</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_discovery</span> <span class="o">=</span> <span class="n">by_discovery</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Unknown"</span><span class="p">)</span>
<span class="n">total_mask</span><span class="o">=</span><span class="n">by_discovery</span><span class="p">.</span><span class="nb">sum</span><span class="p">().</span><span class="n">values</span>
<span class="n">by_discovery</span> <span class="o">=</span> <span class="n">by_discovery</span><span class="p">.</span><span class="n">reindex</span><span class="p">([</span><span class="s">"White"</span><span class="p">,</span> <span class="s">"African-American/Black"</span><span class="p">,</span> <span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">])</span>
<span class="n">by_discovery_comp</span> <span class="o">=</span> <span class="p">(</span><span class="n">by_discovery</span><span class="o">/</span><span class="n">total_mask</span><span class="p">)</span><span class="o">-</span><span class="n">census_race_mask</span>
<span class="n">by_discovery_comp</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Discovery_If_Searched</th>
      <th></th>
      <th>Alcohol</th>
      <th>Alcohol/ Cash</th>
      <th>Alcohol/ Other Property</th>
      <th>Cash</th>
      <th>Cash/ Other Property</th>
      <th>Drugs</th>
      <th>Drugs/ Alcohol</th>
      <th>Drugs/ Alcohol/ Cash</th>
      <th>Drugs/ Alcohol/ Cash/ Other Property</th>
      <th>...</th>
      <th>Weapon</th>
      <th>Weapon/ Drugs</th>
      <th>Weapon/ Drugs/ Alcohol</th>
      <th>Weapon/ Drugs/ Cash</th>
      <th>Weapon/ Drugs/ Other Property</th>
      <th>Weapon/ Other Property</th>
      <th>Weapon/ Vehicle</th>
      <th>Weapon/ Vehicle/ Cash</th>
      <th>Weapon/ Vehicle/ Drugs/ Cash</th>
      <th>Weapons/ Drugs/ Other Property</th>
    </tr>
    <tr>
      <th>Race_Ethnicity</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>White</td>
      <td>-0.025718</td>
      <td>-0.268997</td>
      <td>0.409164</td>
      <td>NaN</td>
      <td>-0.473189</td>
      <td>-0.162265</td>
      <td>-0.277705</td>
      <td>-0.296719</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>-0.215836</td>
      <td>-0.355542</td>
      <td>-0.390836</td>
      <td>0.409164</td>
      <td>0.409164</td>
      <td>0.409164</td>
      <td>NaN</td>
      <td>0.409164</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>African-American/Black</td>
      <td>0.113823</td>
      <td>0.379068</td>
      <td>NaN</td>
      <td>0.769872</td>
      <td>0.652225</td>
      <td>0.341301</td>
      <td>0.386034</td>
      <td>0.358108</td>
      <td>0.769872</td>
      <td>0.769872</td>
      <td>...</td>
      <td>0.238622</td>
      <td>0.475755</td>
      <td>0.369872</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.769872</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.769872</td>
    </tr>
    <tr>
      <td>Hispanic</td>
      <td>-0.062748</td>
      <td>-0.077276</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>-0.064040</td>
      <td>-0.017100</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>0.021503</td>
      <td>-0.075924</td>
      <td>0.065253</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>Asian-Pacific Islander</td>
      <td>-0.021645</td>
      <td>-0.028481</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.960025</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>Native American</td>
      <td>-0.003713</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 32 columns</p>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">search</span> <span class="o">=</span> <span class="n">by_authority</span><span class="p">[[</span><span class="s">"Consent"</span><span class="p">,</span><span class="s">"Incident to Arrest"</span><span class="p">,</span><span class="s">"Parole/Probation"</span><span class="p">,</span><span class="s">"Plain View"</span><span class="p">,</span><span class="s">"Terry Cursory"</span><span class="p">,</span><span class="s">"Tow Inventory"</span><span class="p">]].</span><span class="nb">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">discovery</span> <span class="o">=</span> <span class="n">by_discovery</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'       '</span><span class="p">,</span><span class="s">'Nothing'</span><span class="p">]).</span><span class="nb">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">no_discovery</span> <span class="o">=</span> <span class="n">search</span> <span class="o">-</span> <span class="n">discovery</span>
<span class="n">discovery_nodiscovery</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">no_discovery</span><span class="p">,</span><span class="n">discovery</span><span class="p">])</span>
<span class="n">discovery_nodiscovery</span> <span class="o">=</span> <span class="n">discovery_nodiscovery</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="s">"No_Discovery"</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="s">"Discovery"</span><span class="p">})</span>

<span class="n">total_mask</span><span class="o">=</span><span class="n">discovery_nodiscovery</span><span class="p">.</span><span class="nb">sum</span><span class="p">().</span><span class="n">values</span>
<span class="n">census_race_mask</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_race</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>
<span class="n">discovery_nodiscovery_comp</span> <span class="o">=</span> <span class="p">(</span><span class="n">discovery_nodiscovery</span><span class="o">/</span><span class="n">total_mask</span><span class="p">)</span><span class="c1">#-census_race_mask
</span><span class="n">discovery_nodiscovery</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>No_Discovery</th>
      <th>Discovery</th>
    </tr>
    <tr>
      <th>Race_Ethnicity</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>White</td>
      <td>366.0</td>
      <td>166.0</td>
    </tr>
    <tr>
      <td>African-American/Black</td>
      <td>703.0</td>
      <td>324.0</td>
    </tr>
    <tr>
      <td>Hispanic</td>
      <td>87.0</td>
      <td>36.0</td>
    </tr>
    <tr>
      <td>Asian-Pacific Islander</td>
      <td>5.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <td>Native American</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_result_comp</span><span class="p">.</span><span class="n">T</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Race_Ethnicity</th>
      <th>White</th>
      <th>African-American/Black</th>
      <th>Hispanic</th>
      <th>Asian-Pacific Islander</th>
      <th>Native American</th>
    </tr>
    <tr>
      <th>Result_of_Stop</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>None</td>
      <td>0.491525</td>
      <td>0.355932</td>
      <td>0.135593</td>
      <td>NaN</td>
      <td>0.016949</td>
    </tr>
    <tr>
      <td>Arrest</td>
      <td>0.340153</td>
      <td>0.570332</td>
      <td>0.084399</td>
      <td>0.005115</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>Citation</td>
      <td>0.561575</td>
      <td>0.352537</td>
      <td>0.068627</td>
      <td>0.016911</td>
      <td>0.000351</td>
    </tr>
    <tr>
      <td>Report</td>
      <td>0.411765</td>
      <td>0.470588</td>
      <td>0.058824</td>
      <td>0.058824</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>Warning</td>
      <td>0.517007</td>
      <td>0.379906</td>
      <td>0.082156</td>
      <td>0.019623</td>
      <td>0.001308</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_reason_comp</span><span class="p">.</span><span class="n">T</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Race_Ethnicity</th>
      <th>White</th>
      <th>African-American/Black</th>
      <th>Hispanic</th>
      <th>Asian-Pacific Islander</th>
      <th>Native American</th>
    </tr>
    <tr>
      <th>Reason_for_Stop</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Equipment Violation</td>
      <td>0.482554</td>
      <td>0.423077</td>
      <td>0.079699</td>
      <td>0.013878</td>
      <td>0.000793</td>
    </tr>
    <tr>
      <td>Investigative Stop</td>
      <td>0.520436</td>
      <td>0.408719</td>
      <td>0.064033</td>
      <td>0.006812</td>
      <td>NaN</td>
    </tr>
    <tr>
      <td>Moving Violation</td>
      <td>0.567977</td>
      <td>0.338536</td>
      <td>0.072651</td>
      <td>0.020282</td>
      <td>0.000555</td>
    </tr>
    <tr>
      <td>Other</td>
      <td>0.372263</td>
      <td>0.558394</td>
      <td>0.060219</td>
      <td>0.005474</td>
      <td>0.003650</td>
    </tr>
    <tr>
      <td>Registration</td>
      <td>0.556291</td>
      <td>0.369915</td>
      <td>0.064333</td>
      <td>0.009461</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">binary_comp</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">concat</span><span class="p">([</span><span class="n">A_search_nosearch_comp</span><span class="p">,</span> <span class="n">discovery_nodiscovery_comp</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">binary_comp</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Not_Searched</th>
      <th>Searched</th>
      <th>No_Discovery</th>
      <th>Discovery</th>
    </tr>
    <tr>
      <th>Race_Ethnicity</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>White</td>
      <td>0.570716</td>
      <td>0.314607</td>
      <td>0.314974</td>
      <td>0.313800</td>
    </tr>
    <tr>
      <td>African-American/Black</td>
      <td>0.338358</td>
      <td>0.607333</td>
      <td>0.604991</td>
      <td>0.612476</td>
    </tr>
    <tr>
      <td>Hispanic</td>
      <td>0.071874</td>
      <td>0.072738</td>
      <td>0.074871</td>
      <td>0.068053</td>
    </tr>
    <tr>
      <td>Asian-Pacific Islander</td>
      <td>0.018458</td>
      <td>0.004731</td>
      <td>0.004303</td>
      <td>0.005671</td>
    </tr>
    <tr>
      <td>Native American</td>
      <td>0.000594</td>
      <td>0.000591</td>
      <td>0.000861</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># split into 4 different arrays for spacing
</span><span class="n">race</span> <span class="o">=</span> <span class="p">[</span><span class="s">"White"</span><span class="p">,</span> <span class="s">"African-American/Black"</span><span class="p">,</span><span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">]</span>

<span class="n">results_name</span> <span class="o">=</span> <span class="n">by_result_comp</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">values</span>
<span class="n">results_values</span> <span class="o">=</span> <span class="n">by_result_comp</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">values</span>

<span class="n">reasons_name</span> <span class="o">=</span> <span class="n">by_reason_comp</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">values</span>
<span class="n">reasons_values</span> <span class="o">=</span> <span class="n">by_reason_comp</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">values</span>

<span class="n">binary_name</span> <span class="o">=</span> <span class="n">binary_comp</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">values</span>
<span class="n">binary_value</span> <span class="o">=</span> <span class="n">binary_comp</span><span class="p">.</span><span class="n">T</span><span class="p">.</span><span class="n">values</span>

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Got this code from https://matplotlib.org/3.1.0/gallery/images_contours_and_fields/image_annotated_heatmap.html#sphx-glr-gallery-images-contours-and-fields-image-annotated-heatmap-py
</span><span class="k">def</span> <span class="nf">heatmap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">row_labels</span><span class="p">,</span> <span class="n">col_labels</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">colorbar</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span> <span class="s">" "</span><span class="p">,</span>
            <span class="n">cbar_kw</span><span class="o">=</span><span class="p">{},</span> <span class="n">cbarlabel</span><span class="o">=</span><span class="s">""</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s">"""
    Create a heatmap from a numpy array and two lists of labels.

    Parameters
    ----------
    data
        A 2D numpy array of shape (N, M).
    row_labels
        A list or array of length N with the labels for the rows.
    col_labels
        A list or array of length M with the labels for the columns.
    ax
        A `matplotlib.axes.Axes` instance to which the heatmap is plotted.  If
        not provided, use current axes or create a new one.  Optional.
    cbar_kw
        A dictionary with arguments to `matplotlib.Figure.colorbar`.  Optional.
    cbarlabel
        The label for the colorbar.  Optional.
    **kwargs
        All other arguments are forwarded to `imshow`.
    """</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">ax</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">gca</span><span class="p">()</span>

    <span class="c1"># Plot the heatmap
</span>    <span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
    
    <span class="c1"># Create colorbar
</span>    <span class="k">if</span><span class="p">(</span><span class="n">colorbar</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">figure</span><span class="p">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">cbar_kw</span><span class="p">)</span>
        <span class="n">cbar</span><span class="p">.</span><span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">cbarlabel</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=-</span><span class="mi">90</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">"bottom"</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">title</span><span class="p">,</span><span class="n">labelpad</span> <span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
    <span class="c1"># We want to show all ticks...
</span>    <span class="n">ax</span><span class="p">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="c1"># ... and label them with the respective list entries.
</span>    <span class="n">ax</span><span class="p">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">col_labels</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">row_labels</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>

    <span class="c1"># Let the horizontal axes labeling appear on top.
</span>    <span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                   <span class="n">labeltop</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="c1"># Rotate the tick labels and set their alignment.
</span>    <span class="n">plt</span><span class="p">.</span><span class="n">setp</span><span class="p">(</span><span class="n">ax</span><span class="p">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=-</span><span class="mi">30</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s">"right"</span><span class="p">,</span>
             <span class="n">rotation_mode</span><span class="o">=</span><span class="s">"anchor"</span><span class="p">)</span>

    <span class="c1"># Turn spines off and create white grid.
</span>    <span class="k">for</span> <span class="n">edge</span><span class="p">,</span> <span class="n">spine</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">spine</span><span class="p">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

    <span class="n">ax</span><span class="p">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s">"minor"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">"w"</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">'-'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s">"minor"</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    
    <span class="n">norm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">colors</span><span class="p">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="mf">0.61</span><span class="p">)</span>
    <span class="n">norm</span><span class="p">(</span><span class="mf">0.</span><span class="p">)</span>
    
    <span class="k">if</span><span class="p">(</span><span class="n">colorbar</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">im</span><span class="p">,</span> <span class="n">cbar</span>
    <span class="k">if</span><span class="p">(</span><span class="n">colorbar</span> <span class="o">==</span> <span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">im</span>


<span class="k">def</span> <span class="nf">annotate_heatmap</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">valfmt</span><span class="o">=</span><span class="s">"{x:.2f}"</span><span class="p">,</span>
                     <span class="n">textcolors</span><span class="o">=</span><span class="p">[</span><span class="s">"black"</span><span class="p">,</span> <span class="s">"white"</span><span class="p">],</span>
                     <span class="n">threshold</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">textkw</span><span class="p">):</span>
    <span class="s">"""
    A function to annotate a heatmap.

    Parameters
    ----------
    im
        The AxesImage to be labeled.
    data
        Data used to annotate.  If None, the image's data is used.  Optional.
    valfmt
        The format of the annotations inside the heatmap.  This should either
        use the string format method, e.g. "$ {x:.2f}", or be a
        `matplotlib.ticker.Formatter`.  Optional.
    textcolors
        A list or array of two color specifications.  The first is used for
        values below a threshold, the second for those above.  Optional.
    threshold
        Value in data units according to which the colors from textcolors are
        applied.  If None (the default) uses the middle of the colormap as
        separation.  Optional.
    **kwargs
        All other arguments are forwarded to each call to `text` used to create
        the text labels.
    """</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">)):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">im</span><span class="p">.</span><span class="n">get_array</span><span class="p">()</span>

    <span class="c1"># Normalize the threshold to the images color range.
</span>    <span class="k">if</span> <span class="n">threshold</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">im</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">im</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="nb">max</span><span class="p">())</span><span class="o">/</span><span class="mf">2.</span>

    <span class="c1"># Set default alignment to center, but allow it to be
</span>    <span class="c1"># overwritten by textkw.
</span>    <span class="n">kw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">horizontalalignment</span><span class="o">=</span><span class="s">"center"</span><span class="p">,</span>
              <span class="n">verticalalignment</span><span class="o">=</span><span class="s">"center"</span><span class="p">)</span>
    <span class="n">kw</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">textkw</span><span class="p">)</span>

    <span class="c1"># Get the formatter in case a string is supplied
</span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">valfmt</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">valfmt</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">ticker</span><span class="p">.</span><span class="n">StrMethodFormatter</span><span class="p">(</span><span class="n">valfmt</span><span class="p">)</span>

    <span class="c1"># Loop over the data and create a `Text` for each "pixel".
</span>    <span class="c1"># Change the text's color depending on the data.
</span>    <span class="n">texts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">kw</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">textcolors</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">im</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">)])</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">im</span><span class="p">.</span><span class="n">axes</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">valfmt</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="bp">None</span><span class="p">),</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
            <span class="n">texts</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">texts</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">((</span><span class="n">ax1</span><span class="p">,</span><span class="n">ax2</span><span class="p">,</span><span class="n">ax3</span><span class="p">))</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">heatmap</span><span class="p">(</span><span class="n">results_values</span><span class="p">,</span> <span class="n">results_name</span><span class="p">,</span> <span class="n">race</span><span class="p">,</span>  <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">colorbar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span> <span class="s">"Result of Stop"</span><span class="p">,</span>
                   <span class="n">cmap</span><span class="o">=</span><span class="s">'Greens'</span><span class="p">,</span> <span class="n">cbarlabel</span><span class="o">=</span><span class="s">"Percentage per individual weapon"</span><span class="p">)</span>
<span class="n">annotate_heatmap</span><span class="p">(</span><span class="n">im</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">heatmap</span><span class="p">(</span><span class="n">reasons_values</span><span class="p">,</span> <span class="n">reasons_name</span><span class="p">,</span> <span class="n">race</span><span class="p">,</span>  <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">colorbar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span> <span class="s">"Reason for Stop"</span><span class="p">,</span>
                   <span class="n">cmap</span><span class="o">=</span><span class="s">'Greens'</span><span class="p">,</span> <span class="n">cbarlabel</span><span class="o">=</span><span class="s">"Percentage per individual weapon"</span><span class="p">)</span>
<span class="n">annotate_heatmap</span><span class="p">(</span><span class="n">im</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">heatmap</span><span class="p">(</span><span class="n">binary_value</span><span class="p">,</span> <span class="n">binary_name</span><span class="p">,</span> <span class="n">race</span><span class="p">,</span>  <span class="n">ax</span><span class="o">=</span><span class="n">ax3</span><span class="p">,</span> <span class="n">colorbar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span> <span class="s">"Search Results"</span><span class="p">,</span>
                   <span class="n">cmap</span><span class="o">=</span><span class="s">'Greens'</span><span class="p">,</span> <span class="n">cbarlabel</span><span class="o">=</span><span class="s">"Percentage per individual weapon"</span><span class="p">)</span>
<span class="n">annotate_heatmap</span><span class="p">(</span><span class="n">im</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>


<span class="n">fig</span><span class="p">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">cbar_ax</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.08</span><span class="p">,</span> <span class="p">.</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">])</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cbar_ax</span><span class="p">,</span><span class="n">orientation</span><span class="o">=</span><span class="s">"horizontal"</span><span class="p">)</span>
<span class="n">cbar</span><span class="p">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">"Percent of Traffic Stops"</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">labelpad</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">cbar</span><span class="p">.</span><span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">"./outcomes.png"</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s">"tight"</span><span class="p">,</span> <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">transparent</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\ProgramData\Anaconda3\lib\site-packages\matplotlib\colors.py:933: UserWarning: Warning: converting a masked element to nan.
  dtype = np.min_scalar_type(value)
C:\ProgramData\Anaconda3\lib\site-packages\numpy\ma\core.py:713: UserWarning: Warning: converting a masked element to nan.
  data = np.array(a, copy=False, subok=subok)
C:\ProgramData\Anaconda3\lib\site-packages\ipykernel_launcher.py:150: UserWarning: This figure includes Axes that are not compatible with tight_layout, so results might be incorrect.
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_102_1.png" alt="png" /></p>

<p><strong>Is there a trend by Age of which certain demographics are pulled over?</strong>
<a id="Street"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Age"</span><span class="p">][</span><span class="n">Age_corrected_filter</span><span class="p">].</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x29074ee3ec8&gt;
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_104_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['White', 'Unknown', 'African-American/Black',
       'Asian-Pacific Islander', 'Hispanic', 'Native American'],
      dtype=object)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">races</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Native American'</span><span class="p">,</span><span class="s">'African-American/Black'</span><span class="p">,</span><span class="s">'Asian-Pacific Islander'</span><span class="p">,</span><span class="s">'Hispanic'</span><span class="p">,</span><span class="s">'White'</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">cm</span><span class="p">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s">'Greens'</span><span class="p">)</span>
<span class="c1">#styles = [(0, (3, 5, 1, 5, 1, 5)),'dashed', 'solid','dashdot',(0, (5, 5)),(0, (3, 5, 1, 5)),(0, (1, 1))]
</span><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmap</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">7</span><span class="p">)]</span>


<span class="c1"># Iterate through the races
</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">race</span> <span class="ow">in</span> <span class="n">races</span><span class="p">:</span>
    <span class="c1"># Subset to the race
</span>    
    <span class="n">subset</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">'Race_Ethnicity'</span><span class="p">]</span> <span class="o">==</span> <span class="n">race</span><span class="p">][</span><span class="n">Age_corrected_filter</span><span class="p">]</span>
    
    
    <span class="c1"># Draw the density plot
</span>    <span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">subset</span><span class="p">[</span><span class="s">'Age'</span><span class="p">].</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">hist</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">kde</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                 <span class="n">label</span> <span class="o">=</span> <span class="n">race</span><span class="p">,</span><span class="n">kde_kws</span><span class="o">=</span><span class="p">{</span><span class="s">'linewidth'</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span><span class="mi">1</span>

<span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">traffic</span><span class="p">[</span><span class="s">'Age'</span><span class="p">][</span><span class="n">Age_corrected_filter</span><span class="p">].</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">hist</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">kde</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">"black"</span><span class="p">,</span>
                 <span class="n">label</span> <span class="o">=</span> <span class="s">"All Races Together"</span><span class="p">,</span><span class="n">kde_kws</span><span class="o">=</span><span class="p">{</span><span class="s">'linewidth'</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s">'linestyle'</span><span class="p">:</span><span class="s">'--'</span><span class="p">,</span><span class="s">'alpha'</span><span class="p">:.</span><span class="mi">5</span><span class="p">})</span>

<span class="c1"># Plot formatting
</span><span class="n">fig</span><span class="p">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mf">22.5</span><span class="p">,</span> <span class="mf">14.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'top'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'right'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'left'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">yticks</span><span class="p">([</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.04</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span><span class="mi">35</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">35</span><span class="p">)</span>
<span class="n">legend</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">'Race'</span><span class="p">,</span><span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">35</span><span class="p">})</span>
<span class="n">legend</span><span class="p">.</span><span class="n">get_title</span><span class="p">().</span><span class="n">set_fontsize</span><span class="p">(</span><span class="s">'30'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Age distribution of Traffic Stops by race </span><span class="se">\n</span><span class="s"> (All races same sample size)'</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span><span class="n">fontdict</span> <span class="o">=</span> 
          <span class="p">{</span><span class="s">'fontsize'</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span>
            <span class="s">'fontweight'</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
             <span class="s">'verticalalignment'</span><span class="p">:</span> <span class="s">'top'</span><span class="p">,</span>
             <span class="s">'horizontalalignment'</span><span class="p">:</span> <span class="s">"center"</span><span class="p">})</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Age (years)'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Density of Traffic Stops"</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">"./Age_by_race.png"</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s">"tight"</span><span class="p">,</span> <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">transparent</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\ProgramData\Anaconda3\lib\site-packages\ipykernel_launcher.py:15: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  from ipykernel import kernelapp as app
C:\ProgramData\Anaconda3\lib\site-packages\ipykernel_launcher.py:15: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  from ipykernel import kernelapp as app
C:\ProgramData\Anaconda3\lib\site-packages\ipykernel_launcher.py:15: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  from ipykernel import kernelapp as app
C:\ProgramData\Anaconda3\lib\site-packages\ipykernel_launcher.py:15: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  from ipykernel import kernelapp as app
C:\ProgramData\Anaconda3\lib\site-packages\ipykernel_launcher.py:15: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  from ipykernel import kernelapp as app
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_106_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<p><strong>Is there any officer that is pulling over a disproportionate percentage of individuals from
a given demographic?</strong>
<a id="Officer"></a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">percents</span> <span class="o">=</span> <span class="p">[</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Black"</span><span class="p">],</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"White"</span><span class="p">],</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Asian_Pacific"</span><span class="p">],</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">],</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Native"</span><span class="p">]]</span>
<span class="n">percents</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">percents</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_officer</span> <span class="o">=</span> <span class="n">officer_top</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="s">"Officer_Badge"</span><span class="p">],</span><span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">count</span><span class="p">()</span>
<span class="n">by_officer</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">"Race_Ethnicity"</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="s">"Officer_Badge"</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span> <span class="s">"Date"</span><span class="p">)</span>
<span class="n">by_officer</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="s">"Unknown"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">by_officer</span><span class="p">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">sum_c</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nb">sum</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">by_officer</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
        <span class="n">by_officer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">iloc</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">by_officer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">iloc</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">/</span><span class="n">sum_c</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span>
<span class="n">officer_black</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">T</span><span class="p">[</span><span class="s">"African-American/Black"</span><span class="p">]</span>
<span class="n">officer_asain</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">T</span><span class="p">[</span><span class="s">"Asian-Pacific Islander"</span><span class="p">]</span>
<span class="n">officer_hispanic</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">T</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">]</span>
<span class="n">officer_native</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">T</span><span class="p">[</span><span class="s">"Native American"</span><span class="p">]</span>
<span class="n">officer_white</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">T</span><span class="p">[</span><span class="s">"White"</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"Number of officers surveryed {}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">by_officer</span><span class="p">.</span><span class="n">T</span><span class="p">)))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Number of officers surveryed 43
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">axes1</span><span class="p">,</span><span class="n">axes2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">17</span><span class="p">))</span>

<span class="n">axes1</span><span class="p">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="n">officer_black</span><span class="p">.</span><span class="n">dropna</span><span class="p">().</span><span class="n">values</span><span class="p">,</span>
                           <span class="n">officer_white</span><span class="p">.</span><span class="n">dropna</span><span class="p">().</span><span class="n">values</span><span class="p">]</span> <span class="p">)</span>

<span class="n">axes1</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"Percentage of Race Stopped by Individual Officers"</span><span class="p">,</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'top'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'right'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'left'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'bottom'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'both'</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="p">.</span><span class="n">PercentFormatter</span><span class="p">())</span>
<span class="c1">#axes1.set_ylabel('Percentage of Population Stopped',labelpad =10,fontsize=25)
</span><span class="n">axes1</span><span class="p">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s">"African America/Black"</span><span class="p">,</span><span class="s">"White"</span><span class="p">],</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">scatter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="n">percents</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span><span class="n">marker</span><span class="o">=</span><span class="s">"D"</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"Black"</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s">"Population Percentage </span><span class="se">\n</span><span class="s"> from Census"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">boxprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s">' '</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">capprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s">' '</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">medianprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'-'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">bp</span> <span class="o">=</span> <span class="n">by_officer</span><span class="p">.</span><span class="n">T</span><span class="p">[[</span><span class="s">"African-American/Black"</span><span class="p">,</span><span class="s">"White"</span><span class="p">]].</span><span class="n">boxplot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span><span class="n">boxprops</span><span class="o">=</span><span class="n">boxprops</span><span class="p">,</span><span class="n">capprops</span><span class="o">=</span><span class="n">capprops</span><span class="p">,</span><span class="n">medianprops</span><span class="o">=</span><span class="n">medianprops</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes1</span><span class="p">)</span>
<span class="c1">#axes1.legend(loc="upper left",fontsize=17)
</span><span class="n">axes1</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="s">'y'</span><span class="p">)</span>
<span class="n">axes1</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">)</span>


<span class="n">axes2</span><span class="p">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="n">officer_asain</span><span class="p">.</span><span class="n">dropna</span><span class="p">().</span><span class="n">values</span><span class="p">,</span>
                           <span class="n">officer_hispanic</span><span class="p">.</span><span class="n">dropna</span><span class="p">().</span><span class="n">values</span><span class="p">,</span>
                           <span class="n">officer_native</span><span class="p">.</span><span class="n">dropna</span><span class="p">().</span><span class="n">values</span><span class="p">]</span> <span class="p">)</span>

<span class="c1">#axes2.set_title("Percentage of Race Stopped by Individual Officers",fontsize = 30)
</span><span class="n">axes2</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'top'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'right'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'left'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'bottom'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'both'</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="p">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s">'%.0f%%'</span><span class="p">))</span>
<span class="c1">#axes2.set_ylabel('Percentage of Population Stopped by individual officer (N = 43)',labelpad =10, fontsize=25)
</span><span class="n">fig</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s">"Percentage of Race Stopped in Individual Officer's Total Traffic Stops (N = 43)"</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="s">'vertical'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">],</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">scatter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">percents</span><span class="p">[</span><span class="mi">2</span><span class="p">::],</span><span class="n">marker</span><span class="o">=</span><span class="s">"D"</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"Black"</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s">"Population Percentage </span><span class="se">\n</span><span class="s"> from Census"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">boxprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s">' '</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">capprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s">' '</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">medianprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'-'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">by_officer</span><span class="p">.</span><span class="n">T</span><span class="p">[[</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">]].</span><span class="n">boxplot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span><span class="n">boxprops</span><span class="o">=</span><span class="n">boxprops</span><span class="p">,</span><span class="n">capprops</span><span class="o">=</span><span class="n">capprops</span><span class="p">,</span><span class="n">medianprops</span><span class="o">=</span><span class="n">medianprops</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes2</span><span class="p">)</span>
<span class="c1">#xes2.grid(True,axis='y')
</span><span class="n">axes2</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">"upper left"</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>
<span class="n">axes2</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">"./Officer_Traffic_Race.png"</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s">"tight"</span><span class="p">,</span> <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">transparent</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_112_0.png" alt="png" /></p>

<p><strong>Are certain demographics more targeted per time of day of the traffic stop?</strong>
<a id="Time"></a></p>

<p>The last plot is the one I ended up using. This plot can be represented in many different ways, but I feel comparing it to the census gives the most imformation and observations of pattern</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">traffic_corrected</span> <span class="o">=</span> <span class="n">traffic</span><span class="p">[</span><span class="n">traffic</span><span class="p">[</span><span class="s">'Race_Ethnicity'</span><span class="p">]</span> <span class="o">!=</span> <span class="s">"Unknown"</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">race_percentage</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'African-American/Black': 0.362891046386192,
 'Asian-Pacific Islander': 0.01720604099244876,
 'Hispanic': 0.07195253505933118,
 'Native American': 0.0005933117583603021,
 'White': 0.11375404530744336}
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">max_hour</span> <span class="o">=</span> <span class="n">traffic_corrected</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">values</span>
<span class="n">white</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"White"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["White"])
</span><span class="n">black</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"African-American/Black"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["Black"])
</span><span class="n">asian</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Asian-Pacific Islander"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["Asian_Pacific"])
</span><span class="n">hispanic</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["Hispanic"])
</span><span class="n">native</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Native American"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["Native"])
</span>
<span class="n">white_m</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">white</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'White'</span><span class="p">])</span>
<span class="n">black_m</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">black</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'African-American/Black'</span><span class="p">])</span>
<span class="n">asian_m</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">asian</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'Asian-Pacific Islander'</span><span class="p">])</span>
<span class="n">hispanic_m</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">hispanic</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'Hispanic'</span><span class="p">])</span>
<span class="n">native_m</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">native</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'Native American'</span><span class="p">])</span>


<span class="n">native_estimate_m</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">native_m</span><span class="p">).</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">"bfill"</span><span class="p">).</span><span class="n">values</span>
<span class="n">asian_estimate_m</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">asian_m</span><span class="p">).</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">"bfill"</span><span class="p">).</span><span class="n">values</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">by_race</span><span class="p">[</span><span class="s">"White"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([0.47021277, 0.4054878 , 0.46610169, 0.38461538, 0.41836735,
       0.31707317, 0.58706468, 0.61942959, 0.63086172, 0.60101243,
       0.56942102, 0.56384505, 0.5725938 , 0.55119215, 0.48765432,
       0.46764706, 0.48816029, 0.50173611, 0.50630631, 0.54291845,
       0.42950108, 0.44904815, 0.462     , 0.47295597])
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">races</span> <span class="o">=</span> <span class="p">[</span><span class="n">black_m</span><span class="p">,</span><span class="n">native_m</span><span class="p">,</span><span class="n">asian_m</span><span class="p">,</span><span class="n">hispanic_m</span><span class="p">,</span><span class="n">white_m</span><span class="p">]</span>

<span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">"African America/Black"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"White"</span><span class="p">,</span><span class="s">"Unkown"</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">cm</span><span class="p">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s">'Greens'</span><span class="p">)</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmap</span><span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">7</span><span class="p">)]</span>

<span class="c1">#plt.plot(np.arange(0,24,1),np.zeros(24),label="Population Percentage \n from Census",linestyle="--",color="Black",alpha=0.8)
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">native_estimate_m</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1">#Plotting the estimated time of asain-pacific
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">asian_estimate_m</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">"--"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>


<span class="c1">#styles = [(0, (3, 5, 1, 5, 1, 5)),'dashed', 'solid','dashdot',(0, (5, 5)),(0, (3, 5, 1, 5)),(0, (1, 1))]
</span>

<span class="c1"># Iterate through the races
</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">race</span> <span class="ow">in</span> <span class="n">races</span><span class="p">:</span>
    <span class="c1"># Subset to the rac
</span>    
    <span class="c1"># Draw the density plot
</span>    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">race</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span><span class="mi">1</span>
    

<span class="c1"># Plot formatting
</span><span class="n">fig</span><span class="p">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mf">18.5</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'top'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'right'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'left'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'both'</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="p">.</span><span class="n">PercentFormatter</span><span class="p">())</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">),</span><span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">16</span><span class="p">},</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Race'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Traffic Stops by Hour compared to race'</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span><span class="n">fontdict</span> <span class="o">=</span> 
          <span class="p">{</span><span class="s">'fontsize'</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
            <span class="s">'fontweight'</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
             <span class="s">'verticalalignment'</span><span class="p">:</span> <span class="s">'top'</span><span class="p">,</span>
             <span class="s">'horizontalalignment'</span><span class="p">:</span> <span class="s">"right"</span><span class="p">})</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Hours (24hr Time)'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Difference from Mean Percentage"</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>



<span class="c1">#Plotting the esitamted time of Native American
</span>

<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">"./Race_per_hour_abs.png"</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s">"tight"</span><span class="p">,</span> <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_119_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">max_hour</span> <span class="o">=</span> <span class="n">traffic_corrected</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">values</span>
<span class="n">white</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"White"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["White"])
</span><span class="n">black</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"African-American/Black"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["Black"])
</span><span class="n">asian</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Asian-Pacific Islander"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["Asian_Pacific"])
</span><span class="n">hispanic</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["Hispanic"])
</span><span class="n">native</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Native American"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="p">)</span><span class="c1">#-census_ALL["Native"])
</span>
<span class="n">white_m</span> <span class="o">=</span> <span class="n">white</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'White'</span><span class="p">]</span>
<span class="n">black_m</span> <span class="o">=</span> <span class="n">black</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'African-American/Black'</span><span class="p">]</span>
<span class="n">asian_m</span> <span class="o">=</span> <span class="n">asian</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'Asian-Pacific Islander'</span><span class="p">]</span>
<span class="n">hispanic_m</span> <span class="o">=</span> <span class="n">hispanic</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'Hispanic'</span><span class="p">]</span>
<span class="n">native_m</span> <span class="o">=</span> <span class="n">native</span> <span class="o">-</span> <span class="n">race_percentage</span><span class="p">[</span><span class="s">'Native American'</span><span class="p">]</span>


<span class="n">native_estimate_m</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">native_m</span><span class="p">.</span><span class="n">copy</span><span class="p">()).</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">"bfill"</span><span class="p">).</span><span class="n">values</span><span class="p">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="n">asian_estimate_m</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">asian_m</span><span class="p">.</span><span class="n">copy</span><span class="p">()).</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">"bfill"</span><span class="p">).</span><span class="n">values</span><span class="p">.</span><span class="n">flatten</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">races</span> <span class="o">=</span> <span class="p">[</span><span class="n">black_m</span><span class="p">,</span><span class="n">native_m</span><span class="p">,</span><span class="n">asian_m</span><span class="p">,</span><span class="n">hispanic_m</span><span class="p">,</span><span class="n">white_m</span><span class="p">]</span>

<span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">"African America/Black"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"White"</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">cm</span><span class="p">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s">'Greens'</span><span class="p">)</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmap</span><span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">7</span><span class="p">)]</span>

<span class="c1">#plt.plot(np.arange(0,24,1),np.zeros(24),label="Population Percentage \n from Census",linestyle="--",color="Black",alpha=0.8)
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">native_estimate_m</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1">#Plotting the estimated time of asain-pacific
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">asian_estimate_m</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">"--"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>


<span class="c1">#styles = [(0, (3, 5, 1, 5, 1, 5)),'dashed', 'solid','dashdot',(0, (5, 5)),(0, (3, 5, 1, 5)),(0, (1, 1))]
</span>

<span class="c1"># Iterate through the races
</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">race</span> <span class="ow">in</span> <span class="n">races</span><span class="p">:</span>
    <span class="c1"># Subset to the rac
</span>    
    <span class="c1"># Draw the density plot
</span>    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">race</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span><span class="mi">1</span>
    

<span class="c1"># Plot formatting
</span><span class="n">fig</span><span class="p">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mf">18.5</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'top'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'right'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'left'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'both'</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="p">.</span><span class="n">PercentFormatter</span><span class="p">())</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span><span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">16</span><span class="p">},</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Race'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Traffic Stops by Hour compared to race'</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span><span class="n">fontdict</span> <span class="o">=</span> 
          <span class="p">{</span><span class="s">'fontsize'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s">'fontweight'</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
             <span class="s">'verticalalignment'</span><span class="p">:</span> <span class="s">'top'</span><span class="p">,</span>
             <span class="s">'horizontalalignment'</span><span class="p">:</span> <span class="s">"right"</span><span class="p">})</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Hours (24hr Time)'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Difference from Mean Percentage"</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>



<span class="c1">#Plotting the esitamted time of Native American
</span>

<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">"./Race_per_hour.png"</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s">"tight"</span><span class="p">,</span> <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_121_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asian</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"Asian-Pacific Islander"</span><span class="p">]</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Asian_Pacific"</span><span class="p">]</span>
<span class="n">native</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"Native American"</span><span class="p">]</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Native"</span><span class="p">]</span>
<span class="n">native_estimate</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">native</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">"bfill"</span><span class="p">).</span><span class="n">values</span><span class="p">)</span>
<span class="n">asian_estimate</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">asian</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">"bfill"</span><span class="p">).</span><span class="n">values</span><span class="p">)</span>

<span class="n">max_hour</span> <span class="o">=</span> <span class="n">traffic_corrected</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">values</span>
<span class="n">white</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"White"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"White"</span><span class="p">])</span>
<span class="n">black</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"African-American/Black"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Black"</span><span class="p">])</span>
<span class="n">asian</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Asian-Pacific Islander"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Asian_Pacific"</span><span class="p">])</span>
<span class="n">hispanic</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">])</span>
<span class="n">native</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">by_race</span><span class="p">[</span><span class="s">"Native American"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Native"</span><span class="p">])</span>

<span class="c1">#white_m = abs(white - white.mean())
#black_m = abs(black - black.mean())
#asain_m = abs(asain - np.nanmean(asain))
#hispanic_m = abs(hispanic - hispanic.mean())
#native_m = abs(native - np.nanmean(native))
</span>

<span class="c1">#native_estimate_m = abs(native_estimate - np.nanmean(native))
#asian_estimate_m = abs(asain_estimate - np.nanmean(asain))
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">races</span> <span class="o">=</span> <span class="p">[</span><span class="n">black</span><span class="p">,</span><span class="n">native</span><span class="p">,</span><span class="n">asian</span><span class="p">,</span><span class="n">hispanic</span><span class="p">,</span><span class="n">white</span><span class="p">]</span>

<span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">"African America/Black"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"White"</span><span class="p">,</span><span class="s">"Unkown"</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">cm</span><span class="p">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s">'Greens'</span><span class="p">)</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmap</span><span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">7</span><span class="p">)]</span>

<span class="c1">#plt.plot(np.arange(0,24,1),np.zeros(24),label="Population Percentage \n from Census",linestyle="--",color="Black",alpha=0.8)
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">native_estimate</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1">#Plotting the estimated time of asain-pacific
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">asian_estimate</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">"--"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>


<span class="c1">#styles = [(0, (3, 5, 1, 5, 1, 5)),'dashed', 'solid','dashdot',(0, (5, 5)),(0, (3, 5, 1, 5)),(0, (1, 1))]
</span>

<span class="c1"># Iterate through the races
</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">race</span> <span class="ow">in</span> <span class="n">races</span><span class="p">:</span>
    <span class="c1"># Subset to the rac
</span>    
    <span class="c1"># Draw the density plot
</span>    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">race</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span><span class="mi">1</span>
    

<span class="c1"># Plot formatting
</span><span class="n">fig</span><span class="p">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mf">18.5</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'top'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'right'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'left'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'both'</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="p">.</span><span class="n">PercentFormatter</span><span class="p">())</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span><span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">16</span><span class="p">},</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Race'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Traffic Stops by Hour compared to race'</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span><span class="n">fontdict</span> <span class="o">=</span> 
          <span class="p">{</span><span class="s">'fontsize'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s">'fontweight'</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
             <span class="s">'verticalalignment'</span><span class="p">:</span> <span class="s">'top'</span><span class="p">,</span>
             <span class="s">'horizontalalignment'</span><span class="p">:</span> <span class="s">"right"</span><span class="p">})</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Hours (24hr Time)'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Difference from Population Percentage"</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>



<span class="c1">#Plotting the esitamted time of Native American
</span>

<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">"./Race_per_hour_census_abs.png"</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s">"tight"</span><span class="p">,</span> <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_123_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">asian</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"Asian-Pacific Islander"</span><span class="p">]</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Asian_Pacific"</span><span class="p">]</span>
<span class="n">native</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"Native American"</span><span class="p">]</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Native"</span><span class="p">]</span>
<span class="n">native_estimate</span><span class="o">=</span><span class="n">native</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">"bfill"</span><span class="p">).</span><span class="n">values</span>
<span class="n">asian_estimate</span><span class="o">=</span><span class="n">asian</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">"bfill"</span><span class="p">).</span><span class="n">values</span>

<span class="n">max_hour</span> <span class="o">=</span> <span class="n">traffic_corrected</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">"Hour"</span><span class="p">]).</span><span class="n">count</span><span class="p">()[</span><span class="s">"Date"</span><span class="p">].</span><span class="n">values</span>
<span class="n">white</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"White"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"White"</span><span class="p">]</span>
<span class="n">black</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"African-American/Black"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Black"</span><span class="p">]</span>
<span class="n">asian</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"Asian-Pacific Islander"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Asian_Pacific"</span><span class="p">]</span>
<span class="n">hispanic</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Hispanic"</span><span class="p">]</span>
<span class="n">native</span> <span class="o">=</span> <span class="n">by_race</span><span class="p">[</span><span class="s">"Native American"</span><span class="p">].</span><span class="n">values</span><span class="o">/</span><span class="n">max_hour</span><span class="o">-</span><span class="n">census_ALL</span><span class="p">[</span><span class="s">"Native"</span><span class="p">]</span>

<span class="c1">#white_m = abs(white - white.mean())
#black_m = abs(black - black.mean())
#asain_m = abs(asain - np.nanmean(asain))
#hispanic_m = abs(hispanic - hispanic.mean())
#native_m = abs(native - np.nanmean(native))
</span>

<span class="c1">#native_estimate_m = abs(native_estimate - np.nanmean(native))
#asian_estimate_m = abs(asain_estimate - np.nanmean(asain))
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">races</span> <span class="o">=</span> <span class="p">[</span><span class="n">black</span><span class="p">,</span><span class="n">native</span><span class="p">,</span><span class="n">asian</span><span class="p">,</span><span class="n">hispanic</span><span class="p">,</span><span class="n">white</span><span class="p">]</span>

<span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">"African America/Black"</span><span class="p">,</span><span class="s">"Native American"</span><span class="p">,</span><span class="s">"Asian-Pacific Islander"</span><span class="p">,</span><span class="s">"Hispanic"</span><span class="p">,</span><span class="s">"White"</span><span class="p">,</span><span class="s">"Unkown"</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">cm</span><span class="p">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s">'Greens'</span><span class="p">)</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmap</span><span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="n">cmap</span><span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="mi">7</span><span class="p">)]</span>

<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="n">label</span><span class="o">=</span><span class="s">"Population Percentage </span><span class="se">\n</span><span class="s"> from Census"</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">"--"</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"Black"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">native_estimate</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1">#Plotting the estimated time of asain-pacific
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">asian_estimate</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">"--"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>


<span class="c1">#styles = [(0, (3, 5, 1, 5, 1, 5)),'dashed', 'solid','dashdot',(0, (5, 5)),(0, (3, 5, 1, 5)),(0, (1, 1))]
</span>

<span class="c1"># Iterate through the races
</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">race</span> <span class="ow">in</span> <span class="n">races</span><span class="p">:</span>
    <span class="c1"># Subset to the rac
</span>    
    <span class="c1"># Draw the density plot
</span>    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">race</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span><span class="n">color</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span><span class="mi">1</span>
    

<span class="c1"># Plot formatting
</span><span class="n">fig</span><span class="p">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mf">24.5</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'top'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'right'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">spines</span><span class="p">[</span><span class="s">'left'</span><span class="p">].</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'both'</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="p">.</span><span class="n">PercentFormatter</span><span class="p">())</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">legend</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'upper center'</span><span class="p">,</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25</span><span class="p">),</span><span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">25</span><span class="p">},</span> <span class="n">title</span> <span class="o">=</span> <span class="s">'Race'</span><span class="p">,</span><span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">legend</span><span class="p">.</span><span class="n">get_title</span><span class="p">().</span><span class="n">set_fontsize</span><span class="p">(</span><span class="s">'25'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Traffic Stops by Hour compared to race'</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span><span class="n">fontdict</span> <span class="o">=</span> 
          <span class="p">{</span><span class="s">'fontsize'</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
            <span class="s">'fontweight'</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
             <span class="s">'verticalalignment'</span><span class="p">:</span> <span class="s">'top'</span><span class="p">})</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Hours (24hr Time)'</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">35</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Difference from Population Percentage"</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">35</span><span class="p">,</span><span class="n">labelpad</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>



<span class="c1">#Plotting the esitamted time of Native American
</span>

<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">"./Race_per_hour_census.png"</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">bbox_inches</span><span class="o">=</span><span class="s">"tight"</span><span class="p">,</span> <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">transparent</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

</code></pre></div></div>

<p><img src="/assets/images/traffic_stop/output_125_0.png" alt="png" /></p>


      </div>
      
    </article>
  </div>
</main>

        </div>

        <div class="search-content">
          <div class="inner">
  
</div>

        </div>
      </div>
    </div>

    <footer id="footer" class="site-footer">
  <div class="inner">
    <div class="copyright">
      
        <p>© Brandon McIntyre. Powered by Jekyll &amp; Basically Basic</p>

      
    </div>
  </div>
</footer>

    

<script async src="/assets/javascripts/main.js"></script>




  </body>

</html>
